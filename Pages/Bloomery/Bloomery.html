<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#12151e">
  <title>TFC Ratios</title>
  <meta name="description" content="Interactive calculators for TerraFirmaCraft early game efficiency ratios - Bloomery and Alloy optimization">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <link href="../Styles/base.css" rel="stylesheet">
  <link href="../Styles/navbar.css" rel="stylesheet">
  <script src="../routing.js"></script>
</head>
<body>

    <!-- ==================== NAVIGATION ==================== -->
    <nav id="nav" class="nav">
    <button class="nav-back" onclick="showView('menu')">
        <svg viewBox="0 0 16 16" fill="none"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        Back to Menu
    </button>
    <div class="nav-divider"></div>
    <button id="nav-bloomery" class="nav-link">Bloomery</button>
    <button id="nav-alloys" class="nav-link" onclick="showView('3Alloys')">Alloys</button>
    </nav>

    <!-- ==================== BLOOMERY CALCULATOR ==================== -->

    In progress
    <section id="view-bloomery" class="hidden">
    <div class="page">
        <header class="page-header">
        <h1>Bloomery Calculator</h1>
        <p>Optimize iron ore and charcoal ratios for maximum ingot yield. The Bloomery accepts a maximum of 48 items.</p>
        </header>

        <div class="two-col">
        <!-- Left Column -->
        <div style="display:flex;flex-direction:column;gap:24px;">

            <!-- Iron Ore Inputs -->
            <div class="card">
            <div class="card-head">
                <h2 class="card-title">Iron Ore Inputs</h2>
                <button class="btn btn-secondary" onclick="bloomeryAddInput()">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M6 2V10M2 6H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
                Add Input
                </button>
            </div>
            <div id="bloomery-inputs" style="display:flex;flex-direction:column;gap:12px;"></div>
            </div>

            <!-- Charcoal -->
            <div class="card">
            <h2 class="card-title">Charcoal</h2>
            <div class="input-group">
                <label class="form-label" for="bloomery-charcoal">Quantity (1 charcoal = 1 bloom/ingot)</label>
                <input id="bloomery-charcoal" type="number" min="0" value="0" oninput="bloomeryRecalc()">
            </div>
            </div>

            <!-- Summary -->
            <div class="card">
            <h2 class="card-title">Summary</h2>
            <div class="stats-grid">
                <div class="stat-box">
                <span class="stat-label">Total Iron (mB)</span>
                <span id="bloom-total-mb" class="stat-value">0</span>
                </div>
                <div class="stat-box">
                <span class="stat-label">Total Items</span>
                <span id="bloom-total-items" class="stat-value">0 / 48</span>
                </div>
                <div class="stat-box">
                <span class="stat-label">Ingots Produced</span>
                <span id="bloom-ingots" class="stat-value primary">0</span>
                </div>
                <div class="stat-box">
                <span class="stat-label">Iron Loss (mB)</span>
                <span id="bloom-loss" class="stat-value">0</span>
                </div>
            </div>
            <p id="bloom-warning" class="warning hidden">Warning: Total items exceed the Bloomery capacity of 48.</p>
            </div>
        </div>

        <!-- Right Column -->
        <div style="display:flex;flex-direction:column;gap:24px;">
            <div class="card">
            <h2 class="card-title">Interactive Graph</h2>
            <p class="card-desc">Desmos visualization of Bloomery constraints. The blue zone represents valid configurations.</p>
            <div class="desmos-wrap">
                <iframe title="Bloomery Desmos Graph" src="https://www.desmos.com/calculator/hmbsmocu3p" loading="lazy"></iframe>
            </div>
            <p class="card-desc">x-axis: Iron Ore items | y-axis: Charcoal items (= ingot count)</p>
            </div>
        </div>
        </div>

        <!-- Analysis -->
        <div class="card analysis-section">
        <h2 class="card-title">Analysis</h2>
        <p class="card-desc">Write your observations and analysis below. This area is for your notes on the ratio calculations.</p>
        </div>
    </div>
    </section>
</body>
</html>
